{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useState, useEffect } from \"react\";\nimport useRefreshToken from \"../hooks/useRefreshToken\";\nimport useAuth from \"../hooks/useAuth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar PersistLogin = function PersistLogin() {\n  var refresh = useRefreshToken();\n\n  var _useAuth = useAuth(),\n      auth = _useAuth.auth;\n\n  useEffect(function () {\n    var verifyRefreshToken = function verifyRefreshToken() {\n      return _regeneratorRuntime.async(function verifyRefreshToken$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(refresh());\n\n            case 3:\n              _context.next = 8;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 5]], Promise);\n    };\n\n    !(auth != null && auth.accessToken) && verifyRefreshToken();\n  }, []);\n  return _jsx(_Fragment, {\n    children: !rememberMe ? _jsx(Outlet, {}) : isLoading ? _jsx(LoadingScreen, {}) : _jsx(Outlet, {})\n  });\n};\n\nexport default PersistLogin;","map":{"version":3,"names":["useState","useEffect","useRefreshToken","useAuth","PersistLogin","refresh","auth","verifyRefreshToken","console","error","accessToken","rememberMe","isLoading"],"sources":["D:/Youcode/Projet/Full Stcuk JavaScript/ZELIVERY/src/components/PersistLogin .js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nimport useRefreshToken from \"../hooks/useRefreshToken\";\r\nimport useAuth from \"../hooks/useAuth\";\r\n\r\nconst PersistLogin = () => {\r\n  const refresh = useRefreshToken();\r\n  const { auth } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const verifyRefreshToken = async () => {\r\n      try {\r\n        await refresh();\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    !auth?.accessToken && verifyRefreshToken()\r\n  }, []);\r\n\r\n  return (\r\n    <>{!rememberMe ? <Outlet /> : isLoading ? <LoadingScreen /> : <Outlet />}</>\r\n  );\r\n};\r\n\r\nexport default PersistLogin;\r\n"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,OAAOC,eAAP;AACA,OAAOC,OAAP;;;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;EACzB,IAAMC,OAAO,GAAGH,eAAe,EAA/B;;EACA,eAAiBC,OAAO,EAAxB;EAAA,IAAQG,IAAR,YAAQA,IAAR;;EAEAL,SAAS,CAAC,YAAM;IACd,IAAMM,kBAAkB,GAAG,SAArBA,kBAAqB;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,iCAEjBF,OAAO,EAFU;;YAAA;cAAA;cAAA;;YAAA;cAAA;cAAA;cAIvBG,OAAO,CAACC,KAAR;;YAJuB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAA3B;;IAQA,EAACH,IAAD,YAACA,IAAI,CAAEI,WAAP,KAAsBH,kBAAkB,EAAxC;EACD,CAVQ,EAUN,EAVM,CAAT;EAYA,OACE;IAAA,UAAG,CAACI,UAAD,GAAc,KAAC,MAAD,KAAd,GAA2BC,SAAS,GAAG,KAAC,aAAD,KAAH,GAAuB,KAAC,MAAD;EAA9D,EADF;AAGD,CAnBD;;AAqBA,eAAeR,YAAf"},"metadata":{},"sourceType":"module"}